sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","../model/formatter","sap/ui/core/UIComponent"],function(e,t,o,r){"use strict";var n;return e.extend("auths.controller.BaseController",{formatter:o,getModelTQA:function(){return n},setModelTQA:function(e){var t=sessionStorage.getItem("oLangu");if(!t){t="EN"}var o=this.getModel().sServiceUrl+(this.getModel().sServiceUrl.includes("?")?"&":"?")+"sap-language="+t;n=new sap.ui.model.odata.v2.ODataModel({serviceUrl:o,annotationURI:"/zsrv_iwfnd/Annotations(TechnicalName='%2FTQA%2FOD_AUTHORIZATIONS_ANNO_MDL',Version='0001')/$value/",headers:{authorization:e,applicationName:"AUTHORIZATIONS"}});var r=new sap.ui.model.odata.v2.ODataModel({serviceUrl:"/sap/opu/odata/TQA/OD_VARIANTS_MANAGEMENT_SRV",headers:{authorization:e,applicationName:"AUTHORIZATIONS"}});this.setModel(r,"vModel");this.setModel(n)},getRouter:function(){return this.getOwnerComponent().getRouter()},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},onNavBack:function(){sessionStorage.setItem("goToLaunchpad","X");this.getRouter().navTo("RouteMain",{},true)},validateFields:function(e){var t=true;e.forEach(e=>{var o=this.byId(e);var r=o.getValue();if(r){o.setValueState("None")}else{o.setValueState("Error");t=false}});return t},getUserAuthentication:function(e){var t=this,o=new URLSearchParams(window.location.search),r=o.get("token");if(r!=null){var n=new Headers;n.append("X-authorization",r);var a={method:"GET",headers:n,redirect:"follow"};fetch("/sap/opu/odata/TQA/AUTHENTICATOR_SRV/USER_AUTHENTICATION",a).then(function(e){if(!e.ok){throw new Error("Ocorreu um erro ao ler a entidade.")}return e.text()}).then(function(e){var o=new DOMParser,n=o.parseFromString(e,"text/xml"),a=n.getElementsByTagName("d:SuccessResponse")[0],i=a.textContent;if(i!="X"){t.getRouter().navTo("NotFound")}else{t.getModel("global").setProperty("/token",r)}}).catch(function(e){console.error(e)})}else{t.getRouter().navTo("NotFound");return}}})});
//# sourceMappingURL=BaseController.js.map